[gd_scene load_steps=18 format=3 uid="uid://cabyflgkmv51q"]

[ext_resource type="PackedScene" uid="uid://642fxxr0tiur" path="res://scenes/ui/gui.tscn" id="1_303we"]
[ext_resource type="Texture2D" uid="uid://wgis0tbn8g77" path="res://assets/sprites/characters/cystal.png" id="1_04058"]
[ext_resource type="PackedScene" uid="uid://qhhokma80i3g" path="res://scenes/enitities/characters/player/player.tscn" id="1_rc2yo"]
[ext_resource type="Script" path="res://scenes/ui/debugger_label.gd" id="3_1imtx"]
[ext_resource type="Script" path="res://scripts/classes/lootbox.gd" id="4_8mtqr"]
[ext_resource type="Texture2D" uid="uid://cjenraw6v5maa" path="res://assets/sprites/loot_boxes/loot_boxes.png" id="4_8yb40"]
[ext_resource type="PackedScene" uid="uid://ijhfll1epcbt" path="res://scenes/ui/pause_menu.tscn" id="4_r6gfg"]
[ext_resource type="Script" path="res://scripts/classes/crystal.gd" id="5_w7jn0"]
[ext_resource type="Script" path="res://scripts/classes/base_stats.gd" id="6_iscmq"]
[ext_resource type="PackedScene" uid="uid://7h715af03isd" path="res://scenes/ui/progress_bar.tscn" id="8_dkxn6"]
[ext_resource type="Script" path="res://scenes/enitities/characters/player/cursor.gd" id="9_j3ywl"]

[sub_resource type="PlaneMesh" id="PlaneMesh_f2q2i"]
size = Vector2(20, 20)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4n38m"]
albedo_color = Color(0.197937, 0.197937, 0.197937, 1)

[sub_resource type="Resource" id="Resource_r64sq"]
script = ExtResource("6_iscmq")
base_max_hp = 100.0
base_hp_regen = 0.0
base_attack_damage = 0.0
base_attack_speed = 0.0
base_critical_chance = 0.0
base_critical_damage = 0.0
base_attack_range = 0.0
base_attack_cooldown = 0.0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_gj3m1"]
radius = 0.0005
height = 1.0

[sub_resource type="ViewportTexture" id="ViewportTexture_g8xmr"]
viewport_path = NodePath("Entities/Crystal/SubViewport")

[sub_resource type="BoxShape3D" id="BoxShape3D_q3tvy"]
size = Vector3(0.5, 0.5, 0.5)

[node name="Game" type="Node3D"]

[node name="Map" type="CSGMesh3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.999679, 0.0253568, 0, -0.0253568, 0.999679, 0, -1, 0)
use_collision = true
mesh = SubResource("PlaneMesh_f2q2i")
material = SubResource("StandardMaterial3D_4n38m")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.707107, 0.353553, -0.612372, 0, 0.866025, 0.5, 0.707107, -0.353553, 0.612372, -1, 6, 1)
light_energy = 4.446
shadow_enabled = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="pause_menu2" parent="CanvasLayer" instance=ExtResource("4_r6gfg")]

[node name="DebuggerLabel" type="Label" parent="CanvasLayer"]
offset_top = 264.0
offset_right = 389.0
offset_bottom = 721.0
script = ExtResource("3_1imtx")

[node name="Control" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="LootBox" type="Control" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = 160.0
offset_top = 8.0
offset_right = 644.0
offset_bottom = 168.0
grow_horizontal = 2
script = ExtResource("4_8mtqr")
time_to_spawn = 5.0

[node name="Sprite2D" type="Sprite2D" parent="CanvasLayer/Control/LootBox"]
position = Vector2(0, 96)
scale = Vector2(2, 2)
texture = ExtResource("4_8yb40")
hframes = 4
vframes = 5

[node name="Label" type="Label" parent="CanvasLayer/Control/LootBox"]
layout_mode = 0
offset_left = 50.0
offset_top = 96.0
offset_right = 163.0
offset_bottom = 119.0
text = "Next item in ..."
horizontal_alignment = 1
vertical_alignment = 1

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Control/LootBox"]

[node name="GUI" parent="." instance=ExtResource("1_303we")]
visible = false

[node name="Entities" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.5, 0.866025, 0, -0.866025, 0.5, 0, -0.7, 0)

[node name="Player" parent="Entities" instance=ExtResource("1_rc2yo")]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, -0.36363, 0.0830748)

[node name="Camera3D" type="Camera3D" parent="Entities/Player"]
transform = Transform3D(1, 0, 0, 0, 0.906308, 0.422619, 0, -0.422619, 0.906308, 0, 2.16363, 3.11693)
fov = 62.5

[node name="Crystal" type="RigidBody3D" parent="Entities" node_paths=PackedStringArray("progress_bar")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.6, -2.98023e-09, 0.1)
gravity_scale = 0.0
script = ExtResource("5_w7jn0")
progress_bar = NodePath("SubViewport/ProgressBar")
NAME = "Crystal"
stats = SubResource("Resource_r64sq")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Entities/Crystal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 0)
shape = SubResource("CapsuleShape3D_gj3m1")

[node name="Sprite3D" type="Sprite3D" parent="Entities/Crystal"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, -0.1, 2.98023e-08)
alpha_cut = 2
alpha_antialiasing_mode = 1
texture = ExtResource("1_04058")

[node name="SubViewport" type="SubViewport" parent="Entities/Crystal"]
disable_3d = true
size = Vector2i(192, 32)

[node name="ProgressBar" parent="Entities/Crystal/SubViewport" instance=ExtResource("8_dkxn6")]

[node name="Sprite3D2" type="Sprite3D" parent="Entities/Crystal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.866026, -0.5)
texture = SubResource("ViewportTexture_g8xmr")

[node name="Cursor" type="Area3D" parent="."]
monitoring = false
monitorable = false
script = ExtResource("9_j3ywl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Cursor"]
shape = SubResource("BoxShape3D_q3tvy")
